"use strict";angular.module("mctApp",["ngRoute","ngSanitize","ngResource"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/posts",{templateUrl:"views/posts/index.html",controller:"PostsCtrl"}).when("/posts/new",{templateUrl:"views/posts/new.html",controller:"NewPostCtrl"}).when("/posts/:name",{templateUrl:"views/posts/show.html",controller:"ShowPostCtrl"}).when("/posts/:name/edit",{templateUrl:"views/posts/edit.html",controller:"EditPostCtrl"}).when("/experiments/maze",{templateUrl:"views/experiments/maze.html",controller:"MazeCtrl"}).when("/experiments/cloth",{templateUrl:"views/experiments/cloth.html",controller:"ClothCtrl"}).when("/chemistry",{templateUrl:"views/chemistry/chemistry.html",controller:"ChemistryCtrl"}).when("/chemistry/periodictable",{templateUrl:"views/chemistry/periodictable.html",controller:"PeriodicTableCtrl"}).when("/mc3",{templateUrl:"views/mc3/mc3.html",controller:"Mc3Ctrl"}).when("/mc3/matrix4",{templateUrl:"views/mc3/matrix4.html",controller:"Matrix4Ctrl"}).when("/mc3/world",{templateUrl:"views/mc3/world.html",controller:"WorldCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("mctApp").controller("MainCtrl",["$scope","$location",function(a,b){a.$location=b,a.$watch("$location.path()",function(b){a.activeNavId=b||"/"}),a.getClass=function(b){return a.activeNavId?a.activeNavId.substring(0,b.length)===b?"active":"":void 0}}]),angular.module("mctApp").controller("PostsCtrl",["$scope","Post","Tag",function(a,b,c){a.query="",a.selectedTags=[],a.init=function(){a.getTags(),a.getPosts()},a.getTagClass=function(b){var c=a.selectedTags.indexOf(b)>=0?"active":"";return c},a.toggleTag=function(b){var c=a.selectedTags.indexOf(b);c>=0?a.selectedTags.splice(c,1):a.selectedTags.push(b),console.log(a.selectedTags)},a.getTags=function(){a.tags=c.query()},a.getPosts=function(){a.posts=b.query()};var d=new Showdown.converter;a.parseContent=function(a){return d.makeHtml(a)}}]),angular.module("mctApp").controller("NewPostCtrl",["$scope","$location","Post",function(a,b,c){a.post={title:"",tags:null,content:""},a.preview="";var d=new Showdown.converter;a.$watch("post.content",function(){a.post.content&&(a.preview=d.makeHtml(a.post.content))}),a.parseContent=function(b){b&&(a.preview=d.makeHtml(b))},a.savePost=function(){var d=new c(a.post);d.$save(),b.path("/posts")}}]),angular.module("mctApp").controller("EditPostCtrl",["$scope","$location","$routeParams","Post",function(a,b,c,d){a.post=d.get({name:c.name});var e=new Showdown.converter;a.$watch("post.content",function(){a.post.content&&(a.preview=e.makeHtml(a.post.content))}),a.savePost=function(){a.post.$save(),b.path("/posts")}}]),angular.module("mctApp").controller("ShowPostCtrl",["$scope","Post","$location","$routeParams",function(a,b,c,d){a.post=b.get({name:d.name});var e=new Showdown.converter;a.$watch("post.content",function(){a.post.content&&(a.content=e.makeHtml(a.post.content))}),a.editPost=function(){c.path("/posts/"+a.post.urlString+"/edit")},a.deletePost=function(){a.post.$delete(),c.path("/posts")}}]),angular.module("mctApp").factory("Post",["$resource",function(a){return a("posts/:name",{name:"@urlString"},{})}]),angular.module("mctApp").factory("Tag",["$resource",function(a){return a("tags/:name",{name:"@urlString"},{})}]),angular.module("mctApp").controller("MazeCtrl",["$scope","Maze","MazeStore",function(a,b,c){a.rows=10,a.columns=10,a.mazes=c.query(),a.init=function(){var c=angular.element(document.getElementById("maze-canvas"))[0];c.width=700,c.height=700,a.maze=new b(c,a.columns,a.rows),a.canvas=c},a.initDemo=function(c){a.maze=a.maze||new b(c,a.columns,a.rows)},a.deleteMaze=function(b){var d=window.confirm("Delete maze: "+b.name);return d?(b.$delete(),a.mazes=c.query(),!1):void 0},a.activeMaze=function(b){return b===a.mazeStore?"active":""},a.saveMaze=function(){var b=a.maze.generateConfig();if(b){if(a.mazeStore)a.mazeStore.config=b,a.mazeStore.$save();else{var d=new c({name:a.name,config:b});d.$save()}a.mazes=c.query()}},a.loadMaze=function(b){a.mazeStore=b,a.name=b.name;var c=JSON.parse(b.config);a.maze.load(c),a.columns=a.maze.columns,a.rows=a.maze.rows},a.solve=function(){a.maze.solve()},a.stop=function(){a.maze.stop()},a.handleMouseDown=function(b){var c=a.maze.cellWidth,d=a.maze.cellHeight,e=Math.floor((b.offsetX-1)/c),f=Math.floor((b.offsetY-1)/d),g=a.maze.findCell(e,f);if(a.maze.startSelection)return a.maze.startSelection=!1,void 0;if(a.maze.endSelection)return a.maze.endSelection=!1,void 0;var h=b.offsetX-g.column*c,i=(g.column+1)*c-b.offsetX,j=b.offsetY-g.row*d,k=(g.row+1)*d-b.offsetY,l={left:h,right:i,top:j,bottom:k},m=a.findLowestDelta(l);g.removeWall(m),a.maze.draw()},a.handleMouseMove=function(b){var c=a.maze.cellWidth,d=a.maze.cellHeight,e=Math.floor(b.offsetX/c),f=Math.floor(b.offsetY/d),g=a.maze.findCell(e,f);a.maze.startSelection&&(a.maze.start=g),a.maze.endSelection&&(a.maze.end=g),a.maze.draw()},a.addStart=function(){a.maze.startSelection=!0},a.addEnd=function(){a.maze.endSelection=!0},a.findLowestDelta=function(a){var b=Object.keys(a).reduce(function(b,c){var d=a[c];return d<a[b]?c:b});return b}}]),angular.module("mctApp").factory("Maze",function(){var a=function(a,b){this.path=a,this.cell=b,this.cell.isBranchPoint=!0,this.branches=[]};a.prototype.getChoices=function(){var a=this.path.history;return this.branches.filter(function(b){return a.indexOf(b)<0})};var b=function(a,b){this.maze=a,this.start=b,this.history=[],this.branchPoints=[],this.cell=b;var c=this.choosePath();this.travelTo(c)};b.prototype.choosePath=function(){var b,c=[];if(this.cell.left&&(b=this.maze.findCell(this.cell.column-1,this.cell.row),this.history.indexOf(b)<0&&c.push(b)),this.cell.right&&(b=this.maze.findCell(this.cell.column+1,this.cell.row),this.history.indexOf(b)<0&&c.push(b)),this.cell.top&&(b=this.maze.findCell(this.cell.column,this.cell.row-1),this.history.indexOf(b)<0&&c.push(b)),this.cell.bottom&&(b=this.maze.findCell(this.cell.column,this.cell.row+1),this.history.indexOf(b)<0&&c.push(b)),c.length>1){var d=new a(this,this.cell);d.branches=c,this.branchPoints.push(d)}var e=c[Math.floor(Math.random()*c.length)];return e},b.prototype.travelTo=function(a){if(this.maze.solveInProgress){if(a===this.maze.end)return window.alert("Win"),this.maze.solveInProgress=!1,void 0;if(!a)for(var b=this.branchPoints[this.branchPoints.length-1],c=1;b;){if(b.getChoices().length>0)return this.maze.draw(),this.travelTo(b.cell),void 0;if(b=this.branchPoints[this.branchPoints.length-c],c>this.branchPoints.length)return window.alert("No solution found"),this.maze.solveInProgress=!1,!1;c++}this.history.push(this.cell),this.cell=a,this.cell.visited=!0;var d=this;this.maze.draw(),window.setTimeout(function(){d.travelTo(d.choosePath())},100)}};var c=function(a,b,c){this.rows=c,this.columns=b,this.defaultFill="lightsteelblue",this.startFill="lightgreen",this.endFill="red",this.branchPointFill="green",this.visitedFill="white",a&&(this.canvas=a,this.ctx=this.canvas.getContext("2d"),this.height=a.height,this.width=a.width),this.reset()};c.prototype.solve=function(){this.solveInProgress||(this.reset(),this.solveInProgress=!0,new b(this,this.start))},c.prototype.stop=function(){this.solveInProgress=!1},c.prototype.getIndex=function(a,b){return a+b*this.columns},c.prototype.findCell=function(a,b){return this.cells[a+b*this.columns]},c.prototype.generateConfig=function(){if(!this.end||!this.start)return console.log("incomplete maze"),void 0;this.changed=!1;var a=this.cells.map(function(a){return{row:a.row,column:a.column,left:a.left,right:a.right,top:a.top,bottom:a.bottom}}),b={rows:this.rows,columns:this.columns,start:{column:this.start.column,row:this.start.row},end:{column:this.end.column,row:this.end.row},cells:a};return this.loadData=b,JSON.stringify(b)},c.prototype.load=function(a){this.solveInProgress=!1,this.loadData=a,console.log(a),this.columns=a.columns,this.rows=a.rows,this.cells=new Array(this.rows*this.columns),this.cellWidth=this.canvas.width/this.columns,this.cellHeight=this.canvas.height/this.rows;var b,c=this;a.cells.forEach(function(a){b=c.addCell(a.column,a.row),b.maze=c,b.top=a.top,b.bottom=a.bottom,b.left=a.left,b.right=a.right,c.cells[c.getIndex(a.column,a.row)]=b}),this.start=this.findCell(a.start.column,a.start.row),this.end=this.findCell(a.end.column,a.end.row),this.draw()},c.prototype.reset=function(){if(this.changed)return window.alert("Reset will destroy new data"),!1;if(this.loadData)return this.load(this.loadData),void 0;var a,b,c;for(this.cellWidth=this.canvas.width/this.columns,this.cellHeight=this.canvas.height/this.rows,this.cells=new Array(this.rows*this.columns),a=0;a<this.rows;a++)for(b=0;b<this.columns;b++)c=this.addCell(b,a);this.draw()},c.prototype.addCell=function(a,b){var c=new d(a,b);return c.maze=this,this.cells[this.getIndex(a,b)]=c,c},c.prototype.draw=function(){if(this.canvas){var a=this.ctx;a.clearRect(0,0,this.width,this.height),this.cells.forEach(function(b){b.draw(a)})}};var d=function(a,b){this.column=a,this.row=b,this.fill="lightsteelblue",this.left=!1,this.right=!1,this.top=!1,this.bottom=!1};return d.prototype.removeWall=function(a){this.maze.changed=!0;var b,c=this.maze;if("left"===a){if(this.column-1<0)return;b=c.findCell(this.column-1,this.row),b&&(this.left=this.left?!1:!0,b.right=b.right?!1:!0)}if("right"===a){if(this.column+1>=c.columns)return;b=c.findCell(this.column+1,this.row),b&&(this.right=this.right?!1:!0,b.left=b.left?!1:!0)}if("top"===a){if(this.row-1<0)return;b=c.findCell(this.column,this.row-1),b&&(this.top=this.top?!1:!0,b.bottom=b.bottom?!1:!0)}if("bottom"===a){if(this.row+1>=c.rows)return;b=c.findCell(this.column,this.row+1),console.log(b),b&&(this.bottom=this.bottom?!1:!0,b.top=b.top?!1:!0)}console.log(this)},d.prototype.draw=function(a){a.lineWidth=1;var b=this.maze.cellWidth,c=this.maze.cellHeight;a.fillStyle=this.maze.start===this?this.maze.startFill:this.maze.end===this?this.maze.endFill:this.isBranchPoint?this.maze.branchPointFill:this.visited?this.maze.visitedFill:this.fill,a.beginPath(),a.fillRect(this.column*b,this.row*c,b,c),a.closePath(),this.left||(a.strokeStyle=this.leftColor,a.beginPath(),a.moveTo(this.column*b,this.row*c),a.lineTo(this.column*b,(this.row+1)*c),a.closePath(),a.stroke()),this.right||(a.strokeStyle=this.rightColor,a.beginPath(),a.moveTo((this.column+1)*b,this.row*c),a.lineTo((this.column+1)*b,(this.row+1)*c),a.closePath(),a.stroke()),this.top||(a.strokeStyle=this.topColor,a.beginPath(),a.moveTo(this.column*b,this.row*c),a.lineTo((this.column+1)*b,this.row*c),a.closePath(),a.stroke()),this.bottom||(a.strokeStyle=this.bottomColor,a.beginPath(),a.moveTo(this.column*b,(this.row+1)*c),a.lineTo((this.column+1)*b,(this.row+1)*c),a.closePath(),a.stroke())},c}),angular.module("mctApp").factory("MazeStore",["$resource",function(a){return a("mazes/:name",{name:"@urlString"})}]),angular.module("mctApp").controller("ClothCtrl",["$scope","Cloth",function(a,b){a.options={rows:15,columns:15},a.initDemo=function(c){a.cloth=new b(c,a.options)},a.reset=function(){a.cloth&&a.cloth.reset(a.options)},a.handleMouseDown=function(b){var c=b.offsetX,d=b.offsetY,e=a.cloth.findClosestPoint(c,d);e.fill="red",e.draw(a.cloth.ctx),console.log(e)},a.handleMouseMove=function(a){console.log(a)},a.handleMouseUp=function(a){console.log(a)}}]),angular.module("mctApp").directive("demo",["$window",function(a){return{templateUrl:"templates/demo.html",restrict:"E",replace:!0,link:function(b,c){function d(){var a=c[0].clientWidth,d=c[0].clientHeight;e=c[0].children[0],e.width=a,e.height=d,b.initDemo(e)}var e;d(),a.onresize=d}}}]),angular.module("mctApp").factory("Cloth",function(){var a,b,c;return a=function(a,b){this.canvas=a,this.reset(b)},a.defaults={rows:15,columns:15,springConstant:10},a.prototype.reset=function(b){b=b||a.defaults,this.rows=b.rows,this.columns=b.columns,this.springConstant=b.springConstant,this.points=[this.rows*this.columns],this.constraints=[],this.width=this.canvas.width,this.offsetWidth=.8*this.width,this.dx=this.offsetWidth/this.columns,this.offsetX=.1*this.width,this.height=this.canvas.height,this.offsetHeight=.6*this.height,this.dy=this.offsetHeight/this.rows,this.offsetY=.1*this.height,this.generatePoints(),this.generateConstraints(),this.ctx=this.canvas.getContext("2d"),this.ctx&&this.draw(this.ctx)},a.prototype.generatePoints=function(){for(var a=0,b=this.columns;b>a;a++)for(var c=0,d=this.rows;d>c;c++)this.addPoint(a,c)},a.prototype.addPoint=function(a,c){this.points[this.getIndex(a,c)]=new b(this,a,c)},a.prototype.generateConstraints=function(){for(var a,b,c=this.springConstant,d=0,e=this.columns;e>d;d++)for(var f=0,g=this.rows;g>f;f++)d>0&&(a=this.points[this.getIndex(d-1,f)],b=this.points[this.getIndex(d,f)],this.addConstraint(a,b,c)),f>0&&(a=this.points[this.getIndex(d,f-1)],b=this.points[this.getIndex(d,f)],this.addConstraint(a,b,c))},a.prototype.addConstraint=function(a,b,d){this.constraints.push(new c(a,b,d))},a.prototype.getIndex=function(a,b){return a+b*this.rows},a.prototype.draw=function(a){this.constraints.forEach(function(b){b.draw(a)}),this.points.forEach(function(b){b.draw(a)})},a.prototype.findClosestPoint=function(a,b){var c,d=1e3,e=null;return this.points.forEach(function(f){c=Math.sqrt(Math.pow(f.x-a,2)+Math.pow(f.y-b,2)),d>c&&(e=f,d=c)}),e},b=function(a,b,c){this.cloth=a,this.column=b,this.row=c,this.fill="black",this.x=this.column*this.cloth.dx+this.cloth.offsetX,this.y=this.row*this.cloth.dy+this.cloth.offsetY},b.prototype.draw=function(a){a.beginPath(),a.fillStyle=this.fill,a.arc(this.x,this.y,3,0,6.28,0),a.closePath(),a.fill()},c=function(a,b,c){this.p1=a,this.p2=b,this.k=c},c.prototype.draw=function(a){a.beginPath(),a.moveTo(this.p1.x,this.p1.y),a.lineTo(this.p2.x,this.p2.y),a.closePath(),a.stroke()},a}),angular.module("mctApp").controller("ChemistryCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("mctApp").controller("PeriodicTableCtrl",["$scope",function(a){a.elements=[{z:1,element:"H",electronConfig:"(1s1)"},{z:2,element:"He",electronConfig:"(1s2)"},{z:3,element:"Li",electronConfig:"(1s2)(2s1)"},{z:4,element:"Be",electronConfig:"(1s2)(2s2)"},{z:5,element:"B",electronConfig:"(1s2)(2s2)(2p1)"},{z:6,element:"C",electronConfig:"(1s2)(2s2)(2p2)"},{z:7,element:"N",electronConfig:"(1s2)(2s2)(2p3)"},{z:8,element:"O",electronConfig:"(1s2)(2s2)(2p4)"},{z:9,element:"F",electronConfig:"(1s2)(2s2)(2p5)"},{z:10,element:"Ne",electronConfig:"(1s2)(2s2)(2p6)"}]}]),angular.module("mctApp").controller("Mc3Ctrl",["$scope","Vector3","Camera","Mesh","Renderer","World",function(a,b,c,d,e,f){function g(){a.advance(),a.animFrame=window.requestAnimationFrame(g)}a.initDemo=function(g){a.rotX=.02,a.rotY=.01,a.rotZ=0,a.world=new f,a.mesh=new d("cube",8),a.mesh.vertices[0]=new b(1,1,1),a.mesh.vertices[1]=new b(1,-1,1),a.mesh.vertices[2]=new b(-1,1,1),a.mesh.vertices[3]=new b(-1,-1,1),a.mesh.vertices[4]=new b(1,1,-1),a.mesh.vertices[5]=new b(1,-1,-1),a.mesh.vertices[6]=new b(-1,1,-1),a.mesh.vertices[7]=new b(-1,-1,-1),a.mesh.connectVertices(0,1),a.mesh.connectVertices(0,2),a.mesh.connectVertices(2,3),a.mesh.connectVertices(1,3),a.mesh.connectVertices(4,5),a.mesh.connectVertices(4,6),a.mesh.connectVertices(6,7),a.mesh.connectVertices(5,7),a.mesh.connectVertices(0,4),a.mesh.connectVertices(1,5),a.mesh.connectVertices(2,6),a.mesh.connectVertices(3,7),a.world.add(a.mesh),a.camera=new c,a.camera.position.z=20,a.renderer=new e(g),a.renderer.render(a.world,a.camera)},a.toggleAnimation=function(){a.animFrame?(window.cancelAnimationFrame(a.animFrame),a.animFrame=void 0):g()},a.advance=function(){a.world.rotateX(a.rotX),a.world.rotateY(a.rotY),a.world.rotateZ(a.rotZ),a.renderer.render(a.world,a.camera)}}]),angular.module("mctApp").factory("Vector3",function(){var a=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0};return a.prototype.mul=function(b){var c=this.x*b,d=this.y*b,e=this.z*b;return new a(c,d,e)},a.prototype.imul=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.div=function(b){var c=this.x/b,d=this.y/b,e=this.z/b;return new a(c,d,e)},a.prototype.idiv=function(a){return this.x/=a,this.y/=a,this.z/=a,this},a.prototype.add=function(b){var c=this.x+b.x,d=this.y+b.y,e=this.z+b.z;return new a(c,d,e)},a.prototype.iadd=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.addVectors=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},a.prototype.sub=function(b){var c=this.x-b.x,d=this.y-b.y,e=this.z-b.z;return new a(c,d,e)},a.prototype.isub=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},a.prototype.dot=function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z;return b},a.prototype.cross=function(b){var c=this.y*b.z-this.z*b.y,d=this.z*b.x-this.x*b.z,e=this.x*b.y-this.y*b.x;return new a(c,d,e)},a.prototype.crossVectors=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},a.prototype.length=function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return a},a.prototype.squaredLength=function(){var a=this.x*this.x+this.y*this.y+this.z*this.z;return a},a.prototype.normalize=function(){var b=this.length();return new a(this.x/b,this.y/b,this.z/b)},a.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},a.prototype.applyProjection=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements,f=1/(e[3]*b+e[7]*c+e[11]*d+e[15]);return this.x=(e[0]*b+e[4]*c+e[8]*d+e[12])*f,this.y=(e[1]*b+e[5]*c+e[9]*d+e[13])*f,this.z=(e[2]*b+e[6]*c+e[10]*d+e[14])*f,this},a.prototype.setFromMatrixPosition=function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},a.Zero=function(){return new a(0,0,0)},a.TransformCoordinates=function(b,c){var d=a.Zero(),e=c.elements,f=b.x*e[0]+b.y*e[4]+b.z*e[8]+e[12],g=b.x*e[1]+b.y*e[5]+b.z*e[9]+e[13],h=b.x*e[2]+b.y*e[6]+b.z*e[10]+e[14],i=b.x*e[3]+b.y*e[7]+b.z*e[11]+e[15];return d.x=f/i,d.y=g/i,d.z=h/i,d},a}),angular.module("mctApp").factory("Object3d",["Vector3","Matrix4","Quaternion",function(a,b,c){var d=function(){this.name="",this.parent=void 0,this.children=[],this.position=new a(0,0,0),this.rotation=new a(0,0,0),this.quaternion=new c,this.scale=new a(1,1,1),this.matrix=new b,this.matrixWorld=new b,this.matrixWorld.makeRotationFromQuaternion(this.quaternion),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0};return d.prototype={add:function(a){if(a===this)return console.warn("Cannot add object as child of itself"),void 0;if(a instanceof d){void 0!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b.addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0,this.children.splice(b,1);for(var c=this;void 0!==c.parent;)c=c.parent;void 0!==c&&c.removeObject(a)}},rotateOnAxis:function(a,b){var d=new c;return d.setFromAxisAngle(a,b),this.quaternion.multiply(d),this},rotateX:function(b){var c=new a(1,0,0);this.rotateOnAxis(c,b)},rotateY:function(b){var c=new a(0,1,0);this.rotateOnAxis(c,b)},rotateZ:function(b){var c=new a(0,0,1);this.rotateOnAxis(c,b)},lookAt:function(a){var c=new b;c.lookAt(a,this.position,this.up),this.quaternion.setFromRotationMatrix(c)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||a===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=0,c=this.children.length;c>b;b++)this.children[b].updateMatrixWorld(a)}},d}]),angular.module("mctApp").factory("World",["Object3d",function(a){var b=function(){a.call(this),this.autoUpdate=!0,this.objectsAdded=[],this.objectsRemoved=[]};return b.prototype=Object.create(a.prototype),b.prototype.addObject=function(a){this.objectsAdded.push(a)},b.prototype.removeObject=function(a){this.objectsRemoved.push(a)},b}]),angular.module("mctApp").factory("Camera",["Vector3","Object3d","Matrix4",function(a,b,c){var d=function(a,d,e,f){b.call(this),this.fov=void 0!==a?a:50,this.aspect=void 0!==d?d:1,this.near=void 0!==e?e:.1,this.far=void 0!==f?f:2e3,this.matrixWorldInverse=new c,this.projectionMatrix=new c,this.updateProjectionMatrix()};return d.prototype=Object.create(b.prototype),d.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(.5*this.fov*Math.PI/180)*this.near,c=-b,d=a*c,e=a*b,f=Math.abs(e-d),g=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*f/this.fullWidth,d+(this.x+this.width)*f/this.fullWidth,b-(this.y+this.height)*g/this.fullHeight,b-this.y*g/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},d}]),angular.module("mctApp").factory("Renderer",["Matrix4","Vector3","Projector","Mesh",function(a,b,c,d){var e=function(b){this.canvas=b,this.width=b.width,this.height=b.height,this.ctx=b.getContext("2d"),this.projector=new c,this.viewMatrix=new a,this.viewProjectionMatrix=new a,this.modelViewProjectionMatrix=new a};return e.prototype.render=function(a,c){this.ctx.clearRect(0,0,this.width,this.height),this.vertices=[],a.autoUpdate===!0&&a.updateMatrixWorld(),void 0===c.parent&&c.updateMatrixWorld(),this.viewMatrix.copy(c.matrixWorldInverse.getInverse(c.matrixWorld)),this.viewProjectionMatrix.multiplyMatrices(c.projectionMatrix,this.viewMatrix);for(var e=0,f=a.children.length;f>e;e++){var g=a.children[e];if(g instanceof d){this.worldMatrix=g.matrixWorld,this.modelViewProjectionMatrix.multiplyMatrices(this.viewProjectionMatrix,g.matrixWorld);for(var h=0,i=g.vertices.length;i>h;h++){var j=new b,k=g.vertices[h];j.copy(k).applyProjection(this.modelViewProjectionMatrix),this.vertices.push(j),this.drawVertex(j)}for(var l=new b,m=new b,n=0,o=g.lines.length;o>n;n++){var p=g.lines[n];l.copy(p.start).applyProjection(this.modelViewProjectionMatrix),m.copy(p.end).applyProjection(this.modelViewProjectionMatrix),this.drawLine(l,m)}}}},e.prototype.drawLine=function(a,b){var c=a.x*this.width+this.width/2,d=a.y*this.height+this.height/2,e=b.x*this.width+this.width/2,f=b.y*this.height+this.height/2;this.ctx.beginPath(),this.ctx.moveTo(c,d),this.ctx.lineTo(e,f),this.ctx.stroke()},e.prototype.drawVertex=function(a){var b=a.x*this.width+this.width/2,c=a.y*this.height+this.height/2;this.ctx.beginPath(),this.ctx.arc(b,c,3,0,6.28,0),this.ctx.closePath(),this.ctx.fill()},e}]),angular.module("mctApp").factory("Mc3",function(){var a=function(){};return a}),angular.module("mctApp").directive("matrix4",function(){return{templateUrl:"templates/matrix4.html",restrict:"E",transclude:!0,scope:{matrix:"=data"}}}),angular.module("mctApp").factory("Matrix4",["Vector3","Quaternion",function(a,b){var c=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.elements=new Float32Array(16);var q=this.elements;q[0]=void 0!==a?a:1,q[4]=b||0,q[8]=c||0,q[12]=d||0,q[1]=e||0,q[5]=void 0!==f?f:1,q[9]=g||0,q[13]=h||0,q[2]=i||0,q[6]=j||0,q[10]=void 0!==k?k:1,q[14]=l||0,q[3]=m||0,q[7]=n||0,q[11]=o||0,q[15]=void 0!==p?p:1};return c.prototype.toString=function(){var a=this.elements,b=[a[0],a[4],a[8],a[12]].join(","),c=[a[1],a[5],a[9],a[13]].join(","),d=[a[2],a[6],a[10],a[14]].join(","),e=[a[3],a[7],a[11],a[15]].join(","),f=[b,c,d,e].join("\n");return f},c.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},c.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},c.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},c.prototype.copy=function(a){return this.elements.set(a.elements),this},c.prototype.compose=function(a,b,c){return this.makeRotationFromQuaternion(b),this.scale(c),this.setPosition(a),this},c.prototype.scale=function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;return b[0]*=c,b[4]*=d,b[8]*=e,b[1]*=c,b[5]*=d,b[9]*=e,b[2]*=c,b[6]*=d,b[10]*=e,b[3]*=c,b[7]*=d,b[11]*=e,this},c.prototype.multiply=function(a){var b=new c;return b.multiplyMatrices(this,a),b},c.prototype.multiplyMatrices=function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],u=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],K=d[15];return e[0]=f*v+g*z+h*D+i*H,e[4]=f*w+g*A+h*E+i*I,e[8]=f*x+g*B+h*F+i*J,e[12]=f*y+g*C+h*G+i*K,e[1]=j*v+k*z+l*D+m*H,e[5]=j*w+k*A+l*E+m*I,e[9]=j*x+k*B+l*F+m*J,e[13]=j*y+k*C+l*G+m*K,e[2]=n*v+o*z+p*D+q*H,e[6]=n*w+o*A+p*E+q*I,e[10]=n*x+o*B+p*F+q*J,e[14]=n*y+o*C+p*G+q*K,e[3]=r*v+s*z+t*D+u*H,e[7]=r*w+s*A+t*E+u*I,e[11]=r*x+s*B+t*F+u*J,e[15]=r*y+s*C+t*G+u*K,this},c.prototype.multiplyScalar=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},c.prototype.getInverse=function(a){var b=this.elements,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],k=c[13],l=c[2],m=c[6],n=c[10],o=c[14],p=c[3],q=c[7],r=c[11],s=c[15];b[0]=j*o*q-k*n*q+k*m*r-i*o*r-j*m*s+i*n*s,b[4]=g*n*q-f*o*q-g*m*r+e*o*r+f*m*s-e*n*s,b[8]=f*k*q-g*j*q+g*i*r-e*k*r-f*i*s+e*j*s,b[12]=g*j*m-f*k*m-g*i*n+e*k*n+f*i*o-e*j*o,b[1]=k*n*p-j*o*p-k*l*r+h*o*r+j*l*s-h*n*s,b[5]=f*o*p-g*n*p+g*l*r-d*o*r-f*l*s+d*n*s,b[9]=g*j*p-f*k*p-g*h*r+d*k*r+f*h*s-d*j*s,b[13]=f*k*l-g*j*l+g*h*n-d*k*n-f*h*o+d*j*o,b[2]=i*o*p-k*m*p+k*l*q-h*o*q-i*l*s+h*m*s,b[6]=g*m*p-e*o*p-g*l*q+d*o*q+e*l*s-d*m*s,b[10]=e*k*p-g*i*p+g*h*q-d*k*q-e*h*s+d*i*s,b[14]=g*i*l-e*k*l-g*h*m+d*k*m+e*h*o-d*i*o,b[3]=j*m*p-i*n*p-j*l*q+h*n*q+i*l*r-h*m*r,b[7]=e*n*p-f*m*p+f*l*q-d*n*q-e*l*r+d*m*r,b[11]=f*i*p-e*j*p-f*h*q+d*j*q+e*h*r-d*i*r,b[15]=e*j*l-f*i*l+f*h*m-d*j*m-e*h*n+d*i*n;var t=d*b[0]+h*b[4]+l*b[8]+p*b[12];return 0===t?(console.warn("Cannot invert matrix. Determinant is 0 "),this.identity(),this):(this.multiplyScalar(1/t),this)},c.prototype.setPosition=function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},c.prototype.makeRotationFromQuaternion=function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-(m+o),b[4]=k-r,b[8]=l+q,b[1]=k+r,b[5]=1-(j+o),b[9]=n-p,b[2]=l-q,b[6]=n+p,b[10]=1-(j+m),b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},c.prototype.makeFrustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},c.prototype.makePerspective=function(a,b,c,d){var e=c*Math.tan(.5*a*Math.PI/180),f=-e,g=f*b,h=e*b;return this.makeFrustum(g,h,f,e,c,d)},c.prototype.lookAt=function(b,c,d){var e=this.elements,f=a.Zero(),g=a.Zero(),h=a.Zero();return h.subVectors(c,b).normalize(),0===h.length()&&(h.z=1),f.crossVectors(d,h).normalize(),0===f.length()&&(h.x+=1e-4,f.crossVectors(d,h).normalize()),g.crossVectors(h,f).normalize(),e[0]=f.x,e[4]=g.x,e[8]=h.x,e[1]=f.y,e[5]=g.y,e[9]=h.y,e[2]=f.z,e[6]=g.z,e[10]=h.z,this},c.RotationYawPitchRoll=function(a,d,e){var f=new c,g=b.RotationYawPitchRoll(a,d,e);return g.toRotationMatrix(f),f},c.PerspectiveFov=function(a,b,d,e){var f=c.Zero(),g=f.elements,h=1/Math.tan(.5*a);return g[0]=h/b,g[1]=g[2]=g[3]=0,g[5]=h,g[4]=g[6]=g[7]=0,g[8]=g[9]=0,g[10]=-e/(d-e),g[11]=1,g[12]=g[13]=g[15]=0,g[14]=d*e/(d-e),f},c.Zero=function(){var a=new c;return a.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),a},c.Translation=function(a,b,d){var e=new c;return e.set(1,0,0,0,0,1,0,0,0,0,1,0,a,b,d,1),e},c}]),angular.module("mctApp").controller("Matrix4Ctrl",["$scope","Matrix4",function(a,b){a.m1=new b(1,2,0,1,2,1,0,3,2,2,0,1,2,2,3,4),a.m1Inverse=new b,a.m1Inverse.getInverse(a.m1),a.m1.textarea=a.m1.toString(),a.loadMatrix=function(b){var c=a[b],d=[],e=c.textarea.split("\n");return e.forEach(function(a){var b=a.split(",");b.forEach(function(a){d.push(parseFloat(a))})}),c.set.apply(c,d),d},a.m2=new b,a.m2Inverse=new b,a.m2Inverse.getInverse(a.m2),a.m2.textarea=a.m2.toString(),a.m3=new b,a.calculate=function(){a.m3.multiplyMatrices(a.m1,a.m2)},a.calculate1=function(){a.m3.multiplyMatrices(a.m1,a.m1Inverse)}}]),angular.module("mctApp").factory("Mesh",["Object3d",function(a){var b=function(b,c){this.name=b,this.vertices=new Array(c),this.lines=[],a.call(this)};return b.prototype=Object.create(a.prototype),b.prototype.connectVertices=function(a,b){var c=this.vertices[a],d=this.vertices[b];this.lines.push({start:c,end:d})},b}]),angular.module("mctApp").factory("Quaternion",function(){var a=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1};return a.prototype.toRotationMatrix=function(a){var b=a.elements,c=this.x*this.x,d=this.y*this.y,e=this.z*this.z,f=this.x*this.y,g=this.z*this.w,h=this.z*this.x,i=this.y*this.w,j=this.y*this.z,k=this.x*this.w;return b[0]=1-2*(d+e),b[1]=2*(f+g),b[2]=2*(h-i),b[3]=0,b[4]=2*(f-g),b[5]=1-2*(e+c),b[6]=2*(j+k),b[7]=0,b[8]=2*(h+i),b[9]=2*(j-k),b[10]=1-2*(d+c),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,a},a.prototype.multiply=function(a){return this.multiplyQuaternions(this,a)},a.prototype.multiplyQuaternions=function(a,b){var c=a.x,d=a.y,e=a.z,f=a.w,g=b.x,h=b.y,i=b.z,j=b.w;return this.x=c*j+f*g+d*i-e*h,this.y=d*j+f*h+e*g-c*i,this.z=e*j+f*i+c*h-d*g,this.w=f*j-c*g-d*h-e*i,this},a.prototype.setFromAxisAngle=function(a,b){var c=b/2,d=Math.sin(c);return this.x=a.x*d,this.y=a.y*d,this.z=a.z*d,this.w=Math.cos(c),this},a.RotationYawPitchRoll=function(b,c,d){var e=new a(0,0,0,1),f=.5*d,g=.5*c,h=.5*b,i=Math.sin(f),j=Math.cos(f),k=Math.sin(g),l=Math.cos(g),m=Math.sin(h),n=Math.cos(h);return e.x=n*k*j+m*l*i,e.y=m*l*j-n*k*i,e.z=n*l*i-m*k*j,e.w=n*l*j+m*k*i,e},a}),angular.module("mctApp").factory("Projector",["Matrix4","Mesh","Vertex","RenderableObject",function(a,b,c,d){var e=function(){this.objectPool=[],this.objectPoolLength=0,this.objectCount=0,this.vertexPool=[],this.vertexPoolLength=0,this.vertexCount=0,this.viewMatrix=new a,this.viewProjectionMatrix=new a,this.modelViewProjectionMatrix=new a,this.renderData={objects:[],sprites:[],lights:[],elements:[]}};return e.prototype.getObject=function(a){var b=this.getNextObjectInPool();b.id=a.id,b.object=a},e.prototype.getNextObjectInPool=function(){if(this.objectCount===this.objectPoolLength){var a=new d;return this.objectPool.push(a),this.objectPoolLength++,this.objectCount++,a}return this.objectPool[this.objectCount++]},e.prototype.getNextVertexInPool=function(){if(this.vertexCount===this.vertexPoolLength){var a=new c;return this.vertexPool.push(a),this.vertexPoolLength++,this.vertexCount++,a}return this.vertexPool[this.vertexCount++]},e.prototype.projectVertex=function(a){var b=a.position,c=a.positionWorld,d=a.positionScreen;c.copy(b).applyMatrix4(this.modelMatrix),d.copy(c).applyMatrix4(this.viewProjectionMatrix)},e.prototype.projectObject=function(a){a instanceof b&&this.renderData.objects.push(a);for(var c=0,d=a.children.length;d>c;c++)this.projectObject(a.children[c])},e.prototype.projectGraph=function(a){return this.objectCount=0,this.renderData.objects.length=0,this.renderData.sprites.length=0,this.renderData.lights.length=0,this.projectObject(a),this.renderData
},e.prototype.projectWorld=function(a,b){return a.autoUpdate===!0&&a.updateMatrixWorld(),void 0===b.parent&&b.updateMatrixWorld(),this.viewMatrix.copy(b.matrixWorldInverse.getInverse(b.matrixWorld)),this.viewProjectionMatrix.multiplyMatrices(b.projectionMatrix,this.viewMatrix),this.renderData=this.projectGraph(a),this.renderData},e}]),angular.module("mctApp").factory("Vertex",["Vector3","Vector4",function(a,b){var c=function(){this.position=new a,this.positionWorld=new a,this.positionScreen=new b,this.visible=!0};return c.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld),this.positionScreen.copy(a.positionScreen)},c}]),angular.module("mctApp").factory("Vector4",function(){var a=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1};return a.prototype.set=function(a,b,c,d){this.x=a,this.y=b,this.z=c,this.w=d},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},a.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this.w=e[3]*b+e[7]*c+e[11]*d+e[15],this},a}),angular.module("mctApp").factory("RenderableObject",function(){var a=function(){};return a}),angular.module("mctApp").directive("toggle",function(){return{replace:!0,template:'<button class="btn btn-success" ng-click="toggle()">{{text}}</button>',restrict:"E",link:function(a,b,c){a.active=!1,a.text=c.off,a.toggle=function(){a[c.action](),a.active?(b.removeClass("btn-danger"),b.addClass("btn-success"),a.text=c.off,a.active=!1):(b.removeClass("btn-success"),b.addClass("btn-danger"),a.text=c.on,a.active=!0)}}}}),angular.module("mctApp").controller("WorldCtrl",["$scope","Vector3","Camera","Mesh","Renderer","World",function(a,b,c,d,e,f){a.initDemo=function(g){function h(){a.renderer.render(a.world,a.camera)}a.world=new f;var i=new d("cube",8);i.vertices[0]=new b(1,1,1),i.vertices[1]=new b(1,-1,1),i.vertices[2]=new b(-1,1,1),i.vertices[3]=new b(-1,-1,1),i.vertices[4]=new b(1,1,-1),i.vertices[5]=new b(1,-1,-1),i.vertices[6]=new b(-1,1,-1),i.vertices[7]=new b(-1,-1,-1),i.connectVertices(0,1),i.connectVertices(0,2),i.connectVertices(2,3),i.connectVertices(1,3),i.connectVertices(4,5),i.connectVertices(4,6),i.connectVertices(6,7),i.connectVertices(5,7),i.connectVertices(0,4),i.connectVertices(1,5),i.connectVertices(2,6),i.connectVertices(3,7),i.position.x=1,a.world.add(i),i=new d("cube",8),i.vertices[0]=new b(1,1,1),i.vertices[1]=new b(1,-1,1),i.vertices[2]=new b(-1,1,1),i.vertices[3]=new b(-1,-1,1),i.vertices[4]=new b(1,1,-1),i.vertices[5]=new b(1,-1,-1),i.vertices[6]=new b(-1,1,-1),i.vertices[7]=new b(-1,-1,-1),i.connectVertices(0,1),i.connectVertices(0,2),i.connectVertices(2,3),i.connectVertices(1,3),i.connectVertices(4,5),i.connectVertices(4,6),i.connectVertices(6,7),i.connectVertices(5,7),i.connectVertices(0,4),i.connectVertices(1,5),i.connectVertices(2,6),i.connectVertices(3,7),i.position.x=-1,a.world.add(i),i=new d("cube",8),i.vertices[0]=new b(1,1,1),i.vertices[1]=new b(1,-1,1),i.vertices[2]=new b(-1,1,1),i.vertices[3]=new b(-1,-1,1),i.vertices[4]=new b(1,1,-1),i.vertices[5]=new b(1,-1,-1),i.vertices[6]=new b(-1,1,-1),i.vertices[7]=new b(-1,-1,-1),i.connectVertices(0,1),i.connectVertices(0,2),i.connectVertices(2,3),i.connectVertices(1,3),i.connectVertices(4,5),i.connectVertices(4,6),i.connectVertices(6,7),i.connectVertices(5,7),i.connectVertices(0,4),i.connectVertices(1,5),i.connectVertices(2,6),i.connectVertices(3,7),i.position.x=1,i.position.z=-2,a.world.add(i),i=new d("cube",8),i.vertices[0]=new b(1,1,1),i.vertices[1]=new b(1,-1,1),i.vertices[2]=new b(-1,1,1),i.vertices[3]=new b(-1,-1,1),i.vertices[4]=new b(1,1,-1),i.vertices[5]=new b(1,-1,-1),i.vertices[6]=new b(-1,1,-1),i.vertices[7]=new b(-1,-1,-1),i.connectVertices(0,1),i.connectVertices(0,2),i.connectVertices(2,3),i.connectVertices(1,3),i.connectVertices(4,5),i.connectVertices(4,6),i.connectVertices(6,7),i.connectVertices(5,7),i.connectVertices(0,4),i.connectVertices(1,5),i.connectVertices(2,6),i.connectVertices(3,7),i.position.x=-1,i.position.z=-2,a.world.add(i),a.camera=new c,a.camera.position.z=10,a.renderer=new e(g),h(),a.forward=function(){a.camera.position.z-=1,h()},a.back=function(){a.camera.position.z+=1,h()},a.left=function(){a.camera.position.x-=1,h()},a.right=function(){a.camera.position.x+=1,h()},a.lookLeft=function(){a.camera.rotateY(.05),h()},a.lookRight=function(){a.camera.rotateY(-.05),h()}}}]);